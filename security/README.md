# Security Log Files - Generated by FlightGuard DApp

This directory contains comprehensive security logs in Apache2 format and additional security-specific logs.

## üìÅ Log Files Created

### ‚úÖ 1. access.log
**Apache2 Combined Log Format** - All HTTP requests
- Real-time tracking of all API requests
- Contains: IP, timestamp, method, path, status code, referer, user-agent
- Format identical to Apache2 for compatibility with standard log analysis tools

### ‚úÖ 2. error.log  
**Application Error Log** - HTTP errors and exceptions
- All 4xx and 5xx errors
- Application exceptions
- Database errors
- Slow query warnings

### ‚úÖ 3. security.log
**Security Event Log** - Suspicious activity and violations
- Failed authentication attempts (401/403)  
- SQL injection patterns detected
- XSS attempts
- Path traversal attempts
- Rate limit violations
- Unusual access patterns

### ‚úÖ 4. blockchain.log
**Blockchain Transaction Log** - On-chain activity
- Policy purchases
- Premium payments
- Claim settlements
- Payouts
- Transaction hashes and block numbers
- Gas usage

## üìä Log Format Examples

### Access Log
```
127.0.0.1 - - [13/Jan/2026:18:47:00 +0400] "GET /api/flights/ HTTP/1.1" 200 5234 "http://localhost:3000/search" "Mozilla/5.0..."
```

### Security Log
```
[13/Jan/2026:18:41:23 +0400] [SECURITY] 192.168.1.105 - Suspicious request pattern detected - GET /api/flights/?id='OR'1'='1
```

### Blockchain Log
```
[13/Jan/2026:17:52:35 +0400] [BLOCKCHAIN] Type=POLICY_PURCHASE User=25 Amount=$25.00 TxHash=0x422c0e... Status=CONFIRMED
```

## üîç Quick Analysis Commands

See `ANALYSIS.md` for detailed commands.

**Quick examples:**
```bash
# Count total requests
wc -l access.log

# Find errors
grep " 404 " access.log

# Security events
grep "\[SECURITY\]" security.log

# Blockchain transactions count
grep "Type=PAYOUT" blockchain.log | wc -l
```

## üîê Security Review Priorities

1. **Authentication Issues**: grep "401\|403" access.log
2. **Injection Attacks**: grep -i "select\|script" security.log  
3. **Failed Transactions**: grep "Status=FAILED" blockchain.log
4. **High Error Rate**: grep "\[ERROR\]" error.log | tail -100

## ‚öôÔ∏è Middleware Configuration

The logging middleware is automatically enabled in the FastAPI application (`config/asgi.py`).

**Features:**
- Real-time request logging
- Automatic security pattern detection
- Apache2-compatible format
- Multi-file organization by category
- Low performance overhead

## üìå Notes for Security Team

- All logs use UTC+0400 timezone
- Logs are continuously appended (no rotation configured yet)
- Sample data included for reference
- Live logging starts immediately after middleware activation
- Compatible with standard analysis tools (grep, awk, logrotate, fail2ban)
